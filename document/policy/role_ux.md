
# 🔁 역할 재정의 (최종 기준)

**부모는 동시에 3가지 역할을 가짐**

1. 👤 **본인(일반 사용자)** → 자기 폰 잠금
2. 🏠 **부모(가정 관리자)** → 자녀 집에서 관리
3. 🏫 **확인자(학원/학교)** → 기관 관리 자녀 확인

👉 UX 기준은 **“누구의 기기를 관리하느냐”**로 통합

---

# 🧭 수정된 전체 IA (부모 로그인 기준)

```text
[하단 탭 5개]

1. 잠금
2. 자녀
3. QR
4. 알림
5. 내 정보
```

※ 기존 “홈” → **잠금**으로 명확화  
※ “내 잠금”이 항상 최상단에 존재

---

# 🔐 1. 잠금 탭 (부모 + 일반 사용자 통합 핵심)

> “내 폰과 가족의 폰을 한 곳에서 관리”

---

## 🔹 섹션 1. 내 잠금 (일반 사용자)

```
[내 잠금]

현재 상태: 🔓 잠금 해제됨

[바로 잠그기]
[예약 잠금 설정]

잠금 방식
- 전체 잠금 / 앱 잠금

[QR 생성]
- 바로잠금 QR
- 예약잠금 QR
- 고정 QR (개인)
```

✔ 부모라도 **항상 노출**  
✔ 자녀가 없어도 사용 가능  
✔ ANONYMOUS 사용자 UX와 동일

---

## 🔹 섹션 2. 가족 잠금 (부모 권한)

```
[가족 잠금]

김민준 (중2)
- 집 관리: 🔒 적용 중
[관리하기]

김서연 (초5)
- 집 관리: 🔓 해제
[관리하기]
```

→ 자녀 클릭 시 **자녀 상세 > 집 관리 섹션**으로 이동

---

## 🔹 섹션 3. 기관 관리 상태 요약 (읽기 전용)

```
[학원 / 학교 잠금 상태]

김민준
- OO수학학원: 🔒 수업 중
- 출석: ✅
```

⚠️ 조작 버튼 없음  
⚠️ “기관 관리” 라벨 고정

---

# 👨‍👩‍👧 2. 자녀 탭 (사람 중심)

> “아이 기준으로 모든 관리 보기”

---

## 자녀 리스트

```
김민준
- 🏠 집 관리
- 🏫 OO수학학원, OO중학교

김서연
- 🏠 집 관리
- 🏫 OO영어학원
```

---

## 자녀 상세 화면

### 🔹 A. 집에서 관리 (부모 권한)

```
[집에서 관리]

현재 상태: 🔓

[바로 잠그기]
[예약 잠금]
[QR 생성]

잠금 스케줄 보기/수정
```

---

### 🔹 B. 학원 / 학교 관리 (확인 전용)

```
[학원 / 학교]

OO수학학원
- 오늘 수업 18:00 ~ 20:00
- 출석: ✅
- 잠금: 🔒 적용됨

※ 학원에서 관리 중인 잠금입니다.
```

---

# 🔳 3. QR 탭 (용도 기준)

> QR은 “누가 관리하느냐” 기준으로 분리

```
[QR 생성]

👤 나
- 바로잠금 QR
- 예약잠금 QR
- 고정 QR (개인)

👨‍👩‍👧 자녀 (집)
- 김민준 QR
- 김서연 QR

🏫 학원 / 학교
- 제공된 QR 스캔만 가능
```

---

# 🔔 4. 알림 탭 (주체 태그 필수)

```
[알림]

[내 잠금] 예약 잠금 시작됨
[자녀-집] 김민준 잠금 해제됨
[학원] 김민준 출석 완료
```

---

# 👤 5. 내 정보

```
- 계정 정보
- 역할 관리 (부모 / 교사 / 기관관리자)
- 알림 수신 설정
- 고객센터
```

---

# 🧠 UX 설계 핵심 요약

### ✅ 항상 보장되는 것

- **부모도 일반 사용자 기능 사용 가능**
- 자녀 없어도 서비스 가치 존재

### ✅ 권한 충돌 방지

- “집” vs “기관” 명확한 시각적 분리
- 버튼 존재 여부로 권한 명확화

### ✅ 확장성

- 부모 + 교사 겸직
- 태블릿/다중기기 대응 자연스러움

---

# 🧒 자녀(STUDENT) 로그인 IA

> 자녀는 관리의 대상이자 주체입니다.

```text
[하단 탭 4개]

1. 잠금 (홈)
2. 스케줄 (통합 내역)
3. QR스캔 (링크/인증)
4. 내 정보
```

### 🔐 1. 잠금 (Dashboard)
- 현재 잠금 상태 실시간 표시 (누가 잠갔는지 주체 표기)
- **[본인]** 예약 잠금 설정 및 관리
- **[부모/기관]**에 의한 잠금 진행 시 남은 시간 표시

### 📅 2. 스케줄 (Unified Schedules)
- **통합 뷰**: 본인 직접 설정 + 부모님 설정 + 기관 설정(학원 등)이 한 화면에 모임
- **권한 제어**:
  - **본인 설정**: 수정 및 삭제 가능
  - **부모/기관 설정**: **[읽기 전용]**으로 표시. 활성화 스위치 조작 및 삭제 버튼 비활성화 (권한 없음 안내)
- **시각적 구분**: 스케줄 아이템별 '출처(부모/학원/본인)' 태그 표시

### 👤 3. 내 정보
- 내 계정 정보 확인
- 연결된 부모/기관 리스트 확인
- 획득한 포인트/랭킹 (향후 확장)

# 일반사용자 정의
- kakao, apple 로그인 없이 게스트로 이용하는 사용자
- 자녀의 경우도 부모 또는 기관과 링크가 되지 않으면 일반사용자임

## 일반사용자 UX
- 부모, 기관 사용자와 별도로 하단 탭 4개 표출 (잠금, QR, 알림, 내 정보)
- 내정보 화면에 로그인 UI는 없이 역할정보만 표출함. 로그인 버튼은 없음.
- 내 기기정보 메뉴 : 현재 앱 설치된 기기의 기종, OS버전, 앱버전 표출

# 앱 기본 UX 정책
- Alert UI는  CustomAlert 컴포넌트를 사용함.



# 🧩 1. 전체 Role 정의 (최종 정규화) (260220)

## 🔑 Role은 “계정의 정체성”이 아니라 **“연결 관계에 의해 활성화되는 권한 묶음”**

|구분|Role 코드|설명|
|---|---|---|
|일반 사용자|USER|누구와도 매칭되지 않은 상태|
|자녀|CHILD|부모와 매칭된 사용자|
|학생|STUDENT|기관(학원/학교)과 매칭된 사용자|
|부모|PARENT|가정 단위 관리 권한|
|교사|TEACHER|수업 단위 관리 권한|
|기관관리자|ORG_ADMIN|기관 전체 운영|
|기관업무관리자|ORG_STAFF|출석/QR/운영 보조|

> ✅ **한 계정이 여러 Role을 동시에 가질 수 있음**  
> 예) `USER + PARENT + TEACHER`

---

# 🧭 2. Role Matrix (권한 × 관리대상)

## 🔐 관리 주체 기준 권한표

|관리 대상|USER|CHILD|STUDENT|PARENT|TEACHER|ORG_ADMIN|
|---|---|---|---|---|---|---|
|**본인 기기 잠금**|✅|✅|✅|✅|✅|✅|
|**자녀(가정) 잠금**|❌|❌|❌|✅|❌|❌|
|**학생(기관) 잠금**|❌|❌|❌|❌|✅|✅|
|**예약 잠금 생성**|✅|✅|❌|✅|✅|✅|
|**QR 잠금 생성**|✅|❌|❌|✅|✅|✅|
|**잠금 해제 권한**|본인|❌|❌|자녀|학생|전체|
|**읽기 전용 조회**|❌|부모/기관|부모/기관|기관|부모|부모|

👉 **핵심 원칙**

- CHILD / STUDENT는 **관리 대상**
- USER는 **자기결정권 100%**
- PARENT / TEACHER / ORG_ADMIN은 **관리 주체**

---

# 🧠 3. UX 노출 원칙 (가장 중요)

## ✅ UX는 “Role”이 아니라

### **“지금 내가 관리 중인 기기/사람의 종류” 기준**

---

## 🔁 UX Context Switch 개념

앱 내부에서 항상 아래 Context가 존재:

```text
[현재 컨텍스트]

👤 나
🏠 자녀 - 김민준
🏫 학생 - 김민준 (OO수학학원)
```

→ **버튼 / 권한 / 액션이 이 Context에 따라 바뀜**

---

# 📱 4. Role 조합별 UX 노출 예시

## A. USER only (게스트 / 미연결)

### 노출

- 하단탭: `잠금 / QR / 알림 / 내정보`
- 기능: **내 기기 잠금만 가능**

### 제한

- 자녀 / 기관 메뉴 없음
- “연결하기” CTA만 노출

---

## B. USER + CHILD

> 부모는 없고, 기관도 없는 미성년 사용자 -> 정의 오류로 아래에서 다시 정의

### 노출

- 본인 잠금
- 스케줄(본인 설정만)
- 부모/기관 연결 CTA

---

## C. USER + PARENT

> 일반 부모 사용자 (가정 전용)

### 핵심 UX

- **잠금 탭**
    - 내 잠금 (항상)
    - 가족 잠금
        
- **자녀 탭**
    
    - 집 관리 (쓰기)
    - 기관 관리 (읽기 전용)
        

---

## D. USER + PARENT + TEACHER

> 학부모 + 교사 (현실에서 매우 흔함)

### UX 분리 원칙

- **자녀 관리 ≠ 학생 관리**
- 동일 인물이어도 Context 분리
    

```text
김민준
- 🏠 집 관리 (부모)
- 🏫 OO수학학원 (교사)
```

👉 동일한 잠금 UI라도:

- 집: 바로잠금 / 예약 / QR
- 기관: 수업 시간 기반 잠금

---

## E. USER + STUDENT

> 기관에만 연결된 학생

### UX

- 잠금 상태 표시
- 기관 스케줄 읽기 전용
- 본인 잠금 가능 (정책 허용 시)

---

## F. ORG_ADMIN / ORG_STAFF

### ORG_ADMIN

- 기관 대시보드
- 교사 계정 관리
- 학생 전체 정책
- QR 정책

### ORG_STAFF

- 출석
- QR 스캔
- 상태 확인 (잠금 생성 ❌)
    

---

# 🧩 5. 메뉴 노출 매트릭스

|메뉴|USER|CHILD|STUDENT|PARENT|TEACHER|ORG_ADMIN|
|---|---|---|---|---|---|---|
|잠금|✅|✅|✅|✅|✅|✅|
|자녀|❌|❌|❌|✅|❌|❌|
|학생|❌|❌|❌|❌|✅|✅|
|QR|✅|❌|❌|✅|✅|✅|
|알림|✅|✅|✅|✅|✅|✅|
|기관관리|❌|❌|❌|❌|❌|✅|

---

# 📜 6. 운영 정책 제안 (실전 기준)

## ① 권한 충돌 방지 정책

- **집 vs 기관 잠금은 절대 병합하지 않음**
- 잠금 상태에 항상 `출처 태그` 표시
    - `[부모]`, `[학원]`, `[본인]`

---

## ② FULL 잠금 정책

- FULL 잠금은:
    - 카테고리 선택과 무관
    - **1개 이상 Selection만 있으면 동작**
        
- 단, 부모/기관 UI에 명확히 표시:
    
    > “전체 잠금 (자녀 동의 완료됨)”
    

---

## ③ 보호자 분쟁 방지 UX

- “차단 대상 미설정” 상태는:
    - 부모 UI에서 **예약 버튼 비활성**
    - 자녀에게 CTA 전송
        

---

## ④ 로그 & 감사 정책

모든 잠금은 반드시 로그 남김:

```text
- 누가 (Role)
- 누구의 기기
- 어떤 방식
- 언제
- 왜 (집/기관/본인)
```

---

# 🧠 최종 한 줄 요약

> **LockMoment는 ‘계정 기반 서비스’가 아니라  
> ‘관계 기반 권한 서비스’다**

지금 설계는  
👉 **가정 + 교육 + 개인 생산성**을 동시에 담을 수 있는 구조예요.

다음 단계로 추천:

- 🔄 Role 전환 UX (Context Switcher UI)
- 🔐 권한 충돌 상태 다이어그램
- 🏫 기관 Admin Web IA 정리

원하시는 쪽부터 바로 이어서 같이 설계해볼까요?



좋은 포인트 짚으셨어요 👍  
이건 **개념 정의를 바로잡지 않으면 실제 UX·권한에서 계속 꼬이는 부분**이라, 여기서 정리하는 게 맞습니다.

아래에서  
1️⃣ **B. USER + CHILD 정의 수정에 따른 전체 설계 보정**  
2️⃣ **Role 전환 UX (Context Switcher UI) 상세 설계**  
를 **기존 제안과 충돌 없이** 다시 정리할게요.

---

# 1️⃣ USER + CHILD 정의 수정 (정확한 기준)

## ❌ 기존 정의 (문제점)

> 부모는 없고, 기관도 없는 **미성년 사용자**

→ ❌ 실제로는

- **부모는 존재**
- **기관만 없는 상태**
- 미성년 여부는 **법적·기술적으로 확정하지 않음**
    

---

## ✅ 수정된 정의 (최종)

### **USER + CHILD**

> **부모 계정과 매칭된 사용자**  
> 기관(학원/학교)과는 매칭되지 않은 상태  
> 연령(미성년/성인)은 UX 판단 기준이 아님

📌 핵심:

- CHILD는 **나이 개념이 아니라 “가정 관리 대상” Role**
- 성인 자녀(예: 고3, 대학생)도 CHILD 가능
- 법적 미성년 검증 불필요 → 서비스 안정성 ↑
    

---

# 2️⃣ 수정된 Role 분류 재정의 (핵심 요약)

|Role|활성 조건|의미|
|---|---|---|
|USER|기본값|자기 기기 사용자|
|CHILD|부모 계정과 링크됨|가정 관리 대상|
|STUDENT|기관 계정과 링크됨|기관 관리 대상|
|PARENT|자녀를 1명 이상 가짐|가정 관리자|
|TEACHER|기관 소속|수업 관리자|
|ORG_ADMIN|기관 관리자|운영/정책|

> 🔑 **CHILD / STUDENT는 ‘소속’ 개념**  
> 🔑 **USER는 항상 기본 포함**

---

# 3️⃣ 수정된 B. USER + CHILD UX 설계

## 👤 USER + CHILD 상태란?

```text
- 본인 기기 사용 가능
- 부모가 이 사용자를 "집 관리 대상"으로 관리 중
- 기관(학원/학교) 잠금 없음
```

---

## 📱 USER + CHILD 하단 탭 구조

```text
[하단 탭 4개]

1. 잠금
2. 스케줄
3. QR 스캔
4. 내 정보
```

※ 부모·기관 관리 메뉴 없음 (관리 대상이기 때문)

---

## 🔐 1. 잠금 탭 (Dashboard)

```text
[현재 기기 상태]

🔒 잠금 중
- 출처: 부모 (집)
- 남은 시간: 42분

[본인 잠금 설정]
- 바로 잠그기
- 예약 잠금
```

### UX 원칙

- **본인 잠금은 항상 허용**
- 부모 잠금 중에는:
    - 본인 잠금 버튼 비활성
    - “부모 관리 중” 안내

---

## 📅 2. 스케줄 탭

```text
[스케줄]

🔵 본인 설정
- 공부시간 (18:00 ~ 19:00)

🔴 부모 설정 (읽기 전용)
- 저녁시간 (19:00 ~ 21:00)
```

- 수정/삭제 권한 명확 분리
- 출처 태그 필수

---

## 🔳 3. QR 스캔

- 부모 제공 QR 스캔
- 기관 QR 없음
    

---

## 👤 4. 내 정보

```text
- 계정 정보
- 연결된 보호자: 엄마(홍길동)
- 기기 정보
```

---

# 4️⃣ 부모(PARENT) UX에서의 CHILD 반영

부모 앱에서는 **CHILD는 무조건 “자녀”로만 인식**

```text
김민준
- 🏠 집 관리 대상
- 🏫 기관 없음
```

✔ 기관 섹션 자체가 노출되지 않음  
✔ “기관 연결하기” CTA만 표시 가능

---

# 5️⃣ Role Matrix 보정 (핵심만)

|기능|USER|CHILD|STUDENT|
|---|---|---|---|
|본인 잠금|✅|✅|✅|
|부모 잠금|❌|⛔|❌|
|부모 잠금 조회|❌|✅|❌|
|기관 잠금 조회|❌|❌|✅|

⛔ = 관리 대상 (조작 불가)

---

# 6️⃣ Role 전환 UX (Context Switcher UI)

이제 핵심입니다.  
**이 서비스는 Role 전환 UX 없으면 절대 운영 불가**예요.

---

## 🎯 Context Switcher 설계 원칙

> “나는 누구인가?”가 아니라  
> **“지금 누구의 기기를 보고 있는가?”**

---

## 📍 노출 위치 (권장)

### 옵션 1️⃣ 최상단 헤더 (강력 추천)

```text
[ 👤 나 ▼ ]
```

또는

```text
[ 김민준 ▾ ]
```

---

## 📂 Context Switcher 열림 상태

```text
[관리 대상 선택]

👤 나 (내 기기)

────────────
🏠 자녀
- 김민준
- 김서연

────────────
🏫 학생
- 김민준 (OO수학학원)
```

✔ 그룹 구분 필수  
✔ 아이콘 + 라벨 고정

---

## 🔄 Context 변경 시 동작 규칙

|변경 항목|동작|
|---|---|
|Context 변경|화면 전체 재로딩|
|탭 유지|O (가능하면)|
|권한 변경|버튼 즉시 반영|
|잠금 상태|대상 기준 표시|

---

## 🧠 Context 상태 표시 UX

### 잠금 상태 라벨

```text
🔒 잠금 중
- 대상: 김민준
- 출처: 부모(집)
```

또는

```text
🔒 잠금 중
- 대상: 김민준
- 출처: OO수학학원
```

---

## 🚨 Context Guard (실수 방지 UX)

부모가 **내 기기 잠금**을 하려는데  
Context가 `김민준`일 경우:

```text
⚠️ 현재 '김민준' 기기를 관리 중입니다.
내 기기를 잠그시겠습니까?

[내 기기로 전환]
[취소]
```

---

# 7️⃣ UX 설계 핵심 문장 (개발·기획 공용)

> - Role은 **백엔드 개념**
>     
> - UX는 **Context 개념**
>     
> - 사용자는 Role을 “선택”하지 않는다  
>     👉 **대상을 선택할 뿐이다**
>     

---

# 🔚 최종 요약

- CHILD는 **미성년 개념 ❌**
- **부모와 연결된 ‘가정 관리 대상’**
- USER + CHILD는 매우 흔한 상태
- Context Switcher는 **필수 인프라 UX**
- 이 구조면:
    
    - 부모 + 교사
    - 성인 자녀
    - 다기관 학생  
        전부 무리 없이 확장 가능
        